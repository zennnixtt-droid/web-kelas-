/* ===== RESET & BASE ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #3498db;
    --primary-dark: #2980b9;
    --secondary: #2ecc71;
    --accent: #e74c3c;
    --dark: #2c3e50;
    --light: #ecf0f1;
    --gray: #95a5a6;
    --gray-light: #bdc3c7;
    --success: #27ae60;
    --warning: #f39c12;
    --danger: #e74c3c;
    --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    --radius: 8px;
    --transition: all 0.3s ease;
}

body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    color: var(--dark);
    min-height: 100vh;
    line-height: 1.6;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

/* ===== LOADING ===== */
.loading {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--dark);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    color: white;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.loading p {
    font-size: 1.2rem;
    animation: pulse 1.5s infinite;
}

@keyframes pulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

/* ===== HEADER ===== */
.header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 15px 0;
    box-shadow: var(--shadow);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.logo {
    display: flex;
    align-items: center;
    gap: 15px;
}

.logo-icon {
    font-size: 2.5rem;
    animation: bounce 2s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.logo-text h1 {
    font-size: 1.8rem;
    font-weight: 700;
}

.highlight {
    color: var(--secondary);
    font-weight: 800;
}

.logo-text p {
    font-size: 0.9rem;
    opacity: 0.9;
}

.class-info {
    display: flex;
    gap: 25px;
}

.info-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.95rem;
}

.info-item i {
    font-size: 1.2rem;
}

/* ===== NAVBAR ===== */
.navbar {
    background: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    position: sticky;
    top: 70px;
    z-index: 99;
}

.nav-menu {
    display: flex;
    list-style: none;
    overflow-x: auto;
    padding: 10px 0;
}

.nav-menu::-webkit-scrollbar {
    height: 4px;
}

.nav-menu::-webkit-scrollbar-thumb {
    background: var(--gray-light);
    border-radius: 2px;
}

.nav-link {
    padding: 12px 20px;
    text-decoration: none;
    color: var(--dark);
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    border-radius: var(--radius);
    transition: var(--transition);
    font-weight: 500;
}

.nav-link:hover {
    background: var(--light);
    color: var(--primary);
}

.nav-link.active {
    background: var(--primary);
    color: white;
}

/* ===== MAIN CONTENT ===== */
.main-content {
    padding: 30px 0;
    min-height: calc(100vh - 200px);
}

.tab-content {
    display: none;
    animation: fadeIn 0.5s ease;
}

.tab-content.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ===== CARDS ===== */
.card {
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    transition: var(--transition);
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.card-large {
    grid-column: 1 / -1;
}

.card-header {
    padding: 20px;
    border-bottom: 1px solid var(--light);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-header h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.2rem;
}

.card-body {
    padding: 20px;
}

/* ===== BUTTONS ===== */
.btn-primary, .btn-secondary, .btn-danger, .btn-small {
    padding: 10px 20px;
    border: none;
    border-radius: var(--radius);
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-primary:hover {
    background: var(--primary-dark);
}

.btn-secondary {
    background: var(--gray-light);
    color: var(--dark);
}

.btn-secondary:hover {
    background: var(--gray);
}

.btn-danger {
    background: var(--danger);
    color: white;
}

.btn-danger:hover {
    background: #c0392b;
}

.btn-small {
    padding: 6px 12px;
    font-size: 0.85rem;
}

/* ===== DASHBOARD GRID ===== */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
    margin-top: 25px;
}

.welcome-section {
    background: white;
    padding: 25px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 25px;
}

.welcome-section h2 {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
    color: var(--primary);
}

/* ===== SCHEDULE STYLES ===== */
.schedule-table {
    background: white;
    border-radius: var(--radius);
    overflow: hidden;
    box-shadow: var(--shadow);
}

.schedule-row {
    display: grid;
    grid-template-columns: 100px 1fr;
    border-bottom: 1px solid var(--light);
}

.schedule-row:last-child {
    border-bottom: none;
}

.schedule-time {
    background: var(--light);
    padding: 15px;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
}

.schedule-items {
    display: flex;
    gap: 10px;
    padding: 15px;
    overflow-x: auto;
}

.schedule-item {
    min-width: 200px;
    padding: 15px;
    border-radius: var(--radius);
    background: var(--primary);
    color: white;
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.schedule-item.physical {
    background: #4CAF50;
}

.schedule-item.lab {
    background: #2196F3;
}

.schedule-item.art {
    background: #9C27B0;
}

/* ===== DUTY STYLES ===== */
.duty-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.duty-card {
    background: white;
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow);
    border-left: 5px solid var(--secondary);
}

.duty-card.done {
    opacity: 0.7;
    border-left-color: var(--gray);
}

.duty-day {
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: var(--primary);
}

.duty-members {
    list-style: none;
    margin-top: 10px;
}

.duty-members li {
    padding: 5px 0;
    border-bottom: 1px dashed var(--light);
    display: flex;
    justify-content: space-between;
}

/* ===== MEMBERS STYLES ===== */
.members-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.member-card {
    background: white;
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow);
    text-align: center;
    transition: var(--transition);
}

.member-card:hover {
    transform: translateY(-5px);
}

.member-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 15px;
    color: white;
    font-size: 2rem;
}

.member-name {
    font-weight: 600;
    font-size: 1.2rem;
    margin-bottom: 5px;
}

.member-role {
    color: var(--primary);
    font-weight: 500;
    margin-bottom: 10px;
}

.member-contact {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
}

/* ===== NOTES STYLES ===== */
.notes-editor {
    background: white;
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
    margin-bottom: 30px;
}

.editor-header {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
}

.editor-title {
    flex: 1;
    padding: 12px;
    border: 1px solid var(--gray-light);
    border-radius: var(--radius);
    font-family: 'Poppins', sans-serif;
}

.editor-content {
    width: 100%;
    min-height: 200px;
    padding: 15px;
    border: 1px solid var(--gray-light);
    border-radius: var(--radius);
    font-family: 'Poppins', sans-serif;
    resize: vertical;
    margin-bottom: 15px;
}

.editor-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.notes-list {
    display: grid;
    gap: 15px;
}

.note-item {
    background: white;
    border-radius: var(--radius);
    padding: 20px;
    box-shadow: var(--shadow);
    border-left: 5px solid var(--primary);
}

.note-item.general { border-left-color: var(--primary); }
.note-item.homework { border-left-color: var(--warning); }
.note-item.reminder { border-left-color: var(--danger); }
.note-item.meeting { border-left-color: var(--secondary); }
.note-item.event { border-left-color: #9C27B0; }

.note-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
}

.note-title {
    font-weight: 600;
    font-size: 1.1rem;
}

.note-category {
    background: var(--light);
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
}

.note-date {
    color: var(--gray);
    font-size: 0.85rem;
    margin-top: 10px;
}

/* ===== SETTINGS STYLES ===== */
.settings-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
}

.settings-card {
    background: white;
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
}

.settings-option {
    margin: 20px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 26px;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-label {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--gray-light);
    border-radius: 34px;
    transition: var(--transition);
}

.toggle-label:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 4px;
    bottom: 4px;
    background: white;
    border-radius: 50%;
    transition: var(--transition);
}

input:checked + .toggle-label {
    background: var(--primary);
}

input:checked + .toggle-label:before {
    transform: translateX(24px);
}

/* ===== FOOTER ===== */
.footer {
    background: var(--dark);
    color: white;
    padding: 25px 0;
    margin-top: 50px;
}

.footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 20px;
}

.footer-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.2rem;
    font-weight: 600;
}

.footer-links {
    display: flex;
    gap: 20px;
}

.footer-links a {
    color: white;
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 5px;
    transition: var(--transition);
}

.footer-links a:hover {
    color: var(--primary);
}

.footer-copyright {
    flex: 1;
    text-align: center;
    opacity: 0.8;
    font-size: 0.9rem;
}

/* ===== TOAST & MODAL ===== */
.toast {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--success);
    color: white;
    padding: 15px 25px;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    display: none;
    align-items: center;
    gap: 10px;
    z-index: 1000;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1001;
}

.modal-content {
    background: white;
    border-radius: var(--radius);
    width: 90%;
    max-width: 500px;
    overflow: hidden;
}

.modal-header {
    padding: 20px;
    background: var(--primary);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
}

.modal-body {
    padding: 30px 20px;
}

.modal-footer {
    padding: 20px;
    background: var(--light);
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

/* ===== UTILITY CLASSES ===== */
.select-input, .search-input {
    padding: 10px;
    border: 1px solid var(--gray-light);
    border-radius: var(--radius);
    font-family: 'Poppins', sans-serif;
}

.tab-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    flex-wrap: wrap;
    gap: 15px;
}

.tab-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.loader-small {
    width: 30px;
    height: 30px;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s linear infinite;
    margin: 0 auto;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 768px) {
    .header-content {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }
    
    .class-info {
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .nav-menu {
        justify-content: flex-start;
    }
    
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
    
    .footer-content {
        flex-direction: column;
        text-align: center;
    }
    
    .modal-content {
        width: 95%;
    }
}

/* Dark mode variations */
body.dark-mode {
    background: #1a1a1a;
    color: #f0f0f0;
}

body.dark-mode .card,
body.dark-mode .schedule-table,
body.dark-mode .notes-editor,
body.dark-mode .settings-card {
    background: #2d2d2d;
    color: #f0f0f0;
}

body.dark-mode .nav-link {
    color: #f0f0f0;
}

body.dark-mode .nav-link.active {
    background: var(--primary);
}
```

4. JavaScript (script.js)

```javascript
// script.js - Main JavaScript for Kelas 8E System

document.addEventListener('DOMContentLoaded', function() {
    // Hide loading screen after 2 seconds
    setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
    }, 2000);
    
    // Initialize system
    initializeSystem();
});

// ===== GLOBAL VARIABLES =====
let classData = {
    members: [],
    schedule: {},
    duty: {},
    notes: []
};

// ===== INITIALIZATION =====
function initializeSystem() {
    // Load data from localStorage or create default
    loadData();
    
    // Initialize UI components
    initNavigation();
    initDashboard();
    initSchedule();
    initDuty();
    initMembers();
    initNotes();
    initSettings();
    
    // Start real-time clock
    startClock();
    
    // Show welcome toast
    setTimeout(() => {
        showToast('Sistem Kelas 8E siap digunakan!', 'success');
    }, 2500);
}

// ===== DATA MANAGEMENT =====
function loadData() {
    // Try to load from localStorage
    const savedData = localStorage.getItem('kelas8EData');
    
    if (savedData) {
        classData = JSON.parse(savedData);
        console.log('Data loaded from localStorage');
    } else {
        // Create default data
        createDefaultData();
        saveData();
        console.log('Default data created');
    }
}

function createDefaultData() {
    // Default members
    classData.members = [
        { id: 1, name: 'Andi Pratama', gender: 'male', role: 'Ketua Kelas', email: 'andi@email.com', phone: '081234567890' },
        { id: 2, name: 'Sari Dewi', gender: 'female', role: 'Wakil Ketua', email: 'sari@email.com', phone: '081234567891' },
        { id: 3, name: 'Budi Santoso', gender: 'male', role: 'Sekretaris', email: 'budi@email.com', phone: '081234567892' },
        { id: 4, name: 'Rina Amelia', gender: 'female', role: 'Bendahara', email: 'rina@email.com', phone: '081234567893' },
        { id: 5, name: 'Dedi Kusuma', gender: 'male', role: 'Anggota', email: 'dedi@email.com', phone: '081234567894' },
        { id: 6, name: 'Maya Indah', gender: 'female', role: 'Anggota', email: 'maya@email.com', phone: '081234567895' }
    ];
    
    // Default schedule
    classData.schedule = {
        monday: [
            { time: '07:00-07:45', subject: 'Upacara', teacher: 'Pak Guru', type: 'general' },
            { time: '07:45-08:30', subject: 'Matematika', teacher: 'Bu Sari', type: 'general' },
            { time: '08:30-09:15', subject: 'Fisika', teacher: 'Pak Budi', type: 'lab' },
            { time: '09:15-10:00', subject: 'Kimia', teacher: 'Bu Ani', type: 'lab' },
            { time: '10:00-10:15', subject: 'Istirahat', teacher: '-', type: 'break' },
            { time: '10:15-11:00', subject: 'Biologi', teacher: 'Pak Rio', type: 'general' },
            { time: '11:00-11:45', subject: 'Bahasa Inggris', teacher: 'Bu Linda', type: 'general' }
        ],
        tuesday: [
            { time: '07:00-07:45', subject: 'Bahasa Indonesia', teacher: 'Pak Agus', type: 'general' },
            { time: '07:45-08:30', subject: 'Sejarah', teacher: 'Bu Tuti', type: 'general' },
            { time: '08:30-09:15', subject: 'PKN', teacher: 'Pak Hasan', type: 'general' },
            { time: '09:15-10:00', subject: 'Olahraga', teacher: 'Pak Joko', type: 'physical' },
            { time: '10:00-10:15', subject: 'Istirahat', teacher: '-', type: 'break' },
            { time: '10:15-11:00', subject: 'Seni Budaya', teacher: 'Bu Maya', type: 'art' },
            { time: '11:00-11:45', subject: 'Bimbingan Konseling', teacher: 'Bu Rina', type: 'general' }
        ],
        // Add more days as needed
    };
    
    // Default duty schedule
    classData.duty = {
        week1: {
            monday: ['Andi Pratama', 'Sari Dewi'],
            tuesday: ['Budi Santoso', 'Rina Amelia'],
            wednesday: ['Dedi Kusuma', 'Maya Indah'],
            thursday: ['Andi Pratama', 'Budi Santoso'],
            friday: ['Sari Dewi', 'Rina Amelia']
        },
        week2: {
            monday: ['Dedi Kusuma', 'Maya Indah'],
            tuesday: ['Andi Pratama', 'Sari Dewi'],
            wednesday: ['Budi Santoso', 'Rina Amelia'],
            thursday: ['Dedi Kusuma', 'Maya Indah'],
            friday: ['Andi Pratama', 'Budi Santoso']
        }
    };
    
    // Default notes
    classData.notes = [
        { id: 1, title: 'UTS Semester Genap', content: 'UTS dilaksanakan tanggal 15-22 April. Belajar dengan giat!', category: 'reminder', date: '2024-04-01' },
        { id: 2, title: 'Proyek Fisika', content: 'Proyek fisika tentang hukum Newton dikumpulkan minggu depan.', category: 'homework', date: '2024-04-02' }
    ];
}

function saveData() {
    localStorage.setItem('kelas8EData', JSON.stringify(classData));
    console.log('Data saved to localStorage');
}

// ===== NAVIGATION =====
function initNavigation() {
    const navLinks = document.querySelectorAll('.nav-link');
    const tabContents = document.querySelectorAll('.tab-content');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Remove active class from all links and tabs
            navLinks.forEach(l => l.classList.remove('active'));
            tabContents.forEach(t => t.classList.remove('active'));
            
            // Add active class to clicked link
            this.classList.add('active');
            
            // Show corresponding tab
            const tabId = this.getAttribute('data-tab');
            document.getElementById(tabId).classList.add('active');
        });
    });
}

// ===== DASHBOARD =====
function initDashboard() {
    // Update member count
    document.getElementById('totalMembers').textContent = classData.members.length;
    
    // Load today's schedule
    loadTodaySchedule();
    
    // Load today's duty
    loadTodayDuty();
    
    // Refresh button
    document.getElementById('refreshToday').addEventListener('click', function() {
        loadTodaySchedule();
        loadTodayDuty();
        showToast('Dashboard diperbarui!', 'success');
    });
}

function loadTodaySchedule() {
    const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
    const today = new Date().getDay();
    const todayKey = days[today];
    
    const scheduleContainer = document.getElementById('todaySchedule');
    
    if (classData.schedule[todayKey]) {
        let scheduleHTML = '';
        classData.schedule[todayKey].forEach(item => {
            scheduleHTML += `
                <div class="schedule-item ${item.type}">
                    <strong>${item.subject}</strong>
                    <small>${item.time}</small>
                    <small>${item.teacher}</small>
                </div>
            `;
        });
        
        scheduleContainer.innerHTML = scheduleHTML;
    } else {
        scheduleContainer.innerHTML = '<p>Tidak ada jadwal untuk hari ini.</p>';
    }
}

function loadTodayDuty() {
    const days = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
    const today = new Date().getDay();
    const todayKey = days[today];
    
    // Determine current week (simplified logic)
    const currentWeek = 'week1';
    
    const dutyContainer = document.getElementById('dutyToday');
    
    if (classData.duty[currentWeek] && classData.duty[currentWeek][todayKey]) {
        let dutyHTML = '<ul class="duty-members">';
        classData.duty[currentWeek][todayKey].forEach(member => {
            dutyHTML += `<li>${member}</li>`;
        });
        dutyHTML += '</ul>';
        
        dutyContainer.innerHTML = dutyHTML;
    } else {
        dutyContainer.innerHTML = '<p>Tidak ada piket untuk hari ini.</p>';
    }
}

// ===== SCHEDULE SYSTEM =====
function initSchedule() {
    // Load initial schedule
    loadSchedule('monday');
    
    // Day selector
    document.getElementById('scheduleDay').addEventListener('change', function() {
        loadSchedule(this.value);
    });
    
    // Print button
    document.getElementById('printSchedule').addEventListener('click', function() {
        window.print();
    });
    
    // Edit button
    document.getElementById('editSchedule').addEventListener('click', function() {
        showToast('Fitur edit jadwal akan datang!', 'info');
    });
}

function loadSchedule(day) {
    const scheduleTable = document.getElementById('scheduleTable');
    const dayNames = {
        monday: 'Senin',
        tuesday: 'Selasa',
        wednesday: 'Rabu',
        thursday: 'Kamis',
        friday: 'Jumat',
        saturday: 'Sabtu'
    };
    
    if (classData.schedule[day]) {
        let scheduleHTML = '';
        
        classData.schedule[day].forEach(item => {
            scheduleHTML += `
                <div class="schedule-row">
                    <div class="schedule-time">${item.time}</div>
                    <div class="schedule-items">
                        <div class="schedule-item ${item.type}">
                            <strong>${item.subject}</strong>
                            <p>${item.teacher}</p>
                            <small>${item.type === 'break' ? 'Istirahat' : 'Kelas'}</small>
                        </div>
                    </div>
                </div>
            `;
        });
        
        scheduleTable.innerHTML = scheduleHTML;
        
        // Update day name in dropdown
        document.querySelector(`#scheduleDay option[value="${day}"]`).text = dayNames[day];
    } else {
        scheduleTable.innerHTML = '<p class="no-data">Jadwal belum tersedia untuk hari ini.</p>';
    }
}

// ===== DUTY SYSTEM =====
function initDuty() {
    // Load initial duty
    loadDuty('week1');
    
    // Week selector
    document.getElementById('dutyWeek').addEventListener('change', function() {
        loadDuty(this.value);
    });
    
    // Mark done button
    document.getElementById('markDone').addEventListener('click', function() {
        const currentWeek = document.getElementById('dutyWeek').value;
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
        
        days.forEach(day => {
            const card = document.querySelector(`.duty-card[data-day="${day}"]`);
            if (card) {
                card.classList.add('done');
            }
        });
        
        showToast('Piket minggu ini ditandai selesai!', 'success');
    });
}

function loadDuty(week) {
    const dutyGrid = document.getElementById('dutyGrid');
    
    if (classData.duty[week]) {
        let dutyHTML = '';
        const dayNames = {
            monday: 'Senin',
            tuesday: 'Selasa',
            wednesday: 'Rabu',
            thursday: 'Kamis',
            friday: 'Jumat'
        };
        
        Object.entries(classData.duty[week]).forEach(([day, members]) => {
            dutyHTML += `
                <div class="duty-card" data-day="${day}">
                    <div class="duty-day">${dayNames[day]}</div>
                    <p><strong>Regu Piket:</strong></p>
                    <ul class="duty-members">
                        ${members.map(member => `<li>${member}</li>`).join('')}
                    </ul>
                </div>
            `;
        });
        
        dutyGrid.innerHTML = dutyHTML;
    } else {
        dutyGrid.innerHTML = '<p class="no-data">Jadwal piket belum tersedia.</p>';
    }
}

// ===== MEMBERS SYSTEM =====
function initMembers() {
    // Load initial members
    loadMembers('all');
    
    // Search functionality
    document.getElementById('searchMember').addEventListener('input', function() {
        filterMembers(this.value);
    });
    
    // Filter buttons
    document.querySelectorAll('.filter-option').forEach(option => {
        option.addEventListener('click', function() {
            // Remove active class from all options
            document.querySelectorAll('.filter-option').forEach(opt => {
                opt.classList.remove('active');
            });
            
            // Add active class to clicked option
            this.classList.add('active');
            
            // Load members with selected filter
            loadMembers(this.getAttribute('data-filter'));
        });
    });
    
    // Add member button
    document.getElementById('addMember').addEventListener('click', function() {
        showAddMemberModal();
    });
}

function loadMembers(filter) {
    const membersGrid = document.getElementById('membersGrid');
    
    let filteredMembers = classData.members;
    
    if (filter !== 'all') {
        if (filter === 'male') {
            filteredMembers = classData.members.filter(m => m.gender === 'male');
        } else if (filter === 'female') {
            filteredMembers = classData.members.filter(m => m.gender === 'female');
        } else if (filter === 'committee') {
            filteredMembers = classData.members.filter(m => 
                m.role !== 'Anggota'
            );
        }
    }
    
    if (filteredMembers.length > 0) {
        let membersHTML = '';
        
        filteredMembers.forEach(member => {
            const genderIcon = member.gender === 'male' ? 'mars' : 'venus';
            const genderColor = member.gender === 'male' ? '#3498db' : '#e84393';
            
            membersHTML += `
                <div class="member-card">
                    <div class="member-avatar" style="background: ${genderColor};">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="member-name">${member.name}</div>
                    <div class="member-role">${member.role}</div>
                    <div class="member-contact">
                        <a href="mailto:${member.email}" title="Email">
                            <i class="fas fa-envelope"></i>
                        </a>
                        <a href="tel:${member.phone}" title="Telepon">
                            <i class="fas fa-phone"></i>
                        </a>
                        <a href="#" title="WhatsApp">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
            `;
        });
        
        membersGrid.innerHTML = membersHTML;
    } else {
        membersGrid.innerHTML = '<p class="no-data">Tidak ada anggota yang ditemukan.</p>';
    }
}

function filterMembers(searchTerm) {
    const members = document.querySelectorAll('.member-card');
    
    members.forEach(member => {
        const name = member.querySelector('.member-name').textContent.toLowerCase();
        const role = member.querySelector('.member-role').textContent.toLowerCase();
        
        if (name.includes(searchTerm.toLowerCase()) || role.includes(searchTerm.toLowerCase())) {
            member.style.display = 'block';
        } else {
            member.style.display = 'none';
        }
    });
}

function showAddMemberModal() {
    // Create modal HTML
    const modalHTML = `
        <div class="modal" id="addMemberModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-user-plus"></i> Tambah Anggota Baru</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addMemberForm">
                        <div class="form-group">
                            <label>Nama Lengkap:</label>
                            <input type="text" id="newMemberName" class="editor-title" required>
                        </div>
                        <div class="form-group">
                            <label>Jenis Kelamin:</label>
                            <select id="newMemberGender" class="select-input">
                                <option value="male">Laki-laki</option>
                                <option value="female">Perempuan</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Peran:</label>
                            <select id="newMemberRole" class="select-input">
                                <option value="Anggota">Anggota</option>
                                <option value="Ketua Kelas">Ketua Kelas</option>
                                <option value="Wakil Ketua">Wakil Ketua</option>
                                <option value="Sekretaris">Sekretaris</option>
                                <option value="Bendahara">Bendahara</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="newMemberEmail" class="editor-title">
                        </div>
                        <div class="form-group">
                            <label>Nomor Telepon:</label>
                            <input type="tel" id="newMemberPhone" class="editor-title">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelAddMember">Batal</button>
                    <button class="btn-primary" id="confirmAddMember">Simpan</button>
                </div>
            </div>
        </div>
    `;
    
    // Add modal to page
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    
    // Show modal
    const modal = document.getElementById('addMemberModal');
    modal.style.display = 'flex';
    
    // Close modal events
    modal.querySelector('.modal-close').addEventListener('click', () => {
        modal.remove();
    });
    
    modal.querySelector('#cancelAddMember').addEventListener('click', () => {
        modal.remove();
    });
    
    // Confirm add member
    modal.querySelector('#confirmAddMember').addEventListener('click', () => {
        const name = document.getElementById('newMemberName').value;
        const gender = document.getElementById('newMemberGender').value;
        const role = document.getElementById('newMemberRole').value;
        const email = document.getElementById('newMemberEmail').value;
        const phone = document.getElementById('newMemberPhone').value;
        
        if (name) {
            const newMember = {
                id: classData.members.length + 1,
                name: name,
                gender: gender,
                role: role,
                email: email,
                phone: phone
            };
            
            classData.members.push(newMember);
            saveData();
            loadMembers('all');
            
            modal.remove();
            showToast('Anggota baru berhasil ditambahkan!', 'success');
        }
    });
}

// ===== NOTES SYSTEM =====
function initNotes() {
    // Load initial notes
    loadNotes();
    
    // Clear note button
    document.getElementById('clearNote').addEventListener('click', function() {
        document.getElementById('noteTitle').value = '';
        document.getElementById('noteContent').value = '';
    });
    
    // Save note button
    document.getElementById('saveNote').addEventListener('click', function() {
        saveNote();
    });
    
    // Add note button
    document.getElementById('addNote').addEventListener('click', function() {
        document.getElementById('noteTitle').value = '';
        document.getElementById('noteContent').value = '';
        document.getElementById('noteTitle').focus();
    });
}

function loadNotes() {
    const notesList = document.getElementById('notesList');
    
    if (classData.notes.length > 0) {
        let notesHTML = '';
        
        classData.notes.forEach(note => {
            notesHTML += `
                <div class="note-item ${note.category}">
                    <div class="note-header">
                        <div class="note-title">${note.title}</div>
                        <div class="note-category">${note.category}</div>
                    </div>
                    <div class="note-content">${note.content}</div>
                    <div class="note-date">${note.date}</div>
                </div>
            `;
        });
        
        notesList.innerHTML = notesHTML;
    } else {
        notesList.innerHTML = '<p class="no-data">Belum ada catatan. Tambahkan catatan baru!</p>';
    }
}

function saveNote() {
    const title = document.getElementById('noteTitle').value.trim();
    const content = document.getElementById('noteContent').value.trim();
    const category = document.getElementById('noteCategory').value;
    
    if (title && content) {
        const newNote = {
            id: classData.notes.length + 1,
            title: title,
            content: content,
            category: category,
            date: new Date().toLocaleDateString('id-ID')
        };
        
        classData.notes.unshift(newNote); // Add to beginning
        saveData();
        loadNotes();
        
        // Clear form
        document.getElementById('noteTitle').value = '';
        document.getElementById('noteContent').value = '';
        
        showToast('Catatan berhasil disimpan!', 'success');
    } else {
        showToast('Judul dan konten catatan tidak boleh kosong!', 'error');
    }
}
// ===== SETTINGS SYSTEM =====
function initSettings() {
    // Theme selector
    document.getElementById('saveTheme').addEventListener('click', function() {
        const selectedTheme = document.getElementById('themeSelect').value;
        applyTheme(selectedTheme);
        showToast('Tema berhasil diubah!', 'success');
    });
    
    // Export data
    document.getElementById('exportData').addEventListener('click', function() {
        exportData();
    });
    
    // Import data
    document.getElementById('importBtn').addEventListener('click', function() {
        document.getElementById('importFile').click();
    });
    
    document.getElementById('importFile').addEventListener('change', function(e) {
        importData(e);
    });
    
    // Reset data
    document.getElementById('resetData').addEventListener('click', function() {
        showConfirmationModal(
            'Reset semua data?',
            'Semua data akan dikembalikan ke pengaturan awal. Tindakan ini tidak dapat dibatalkan.',
            resetData
        );
    });
    
    // Load current theme
    const savedTheme = localStorage.getItem('kelas8ETheme') || 'default';
    document.getElementById('themeSelect').value = savedTheme;
    applyTheme(savedTheme);
}

function applyTheme(theme) {
    localStorage.setItem('kelas8ETheme', theme);
    
    // Remove existing theme classes
    document.body.classList.remove('dark-mode', 'green-theme', 'purple-theme');
    
    if (theme === 'dark') {
        document.body.classList.add('dark-mode');
    } else if (theme === 'green') {
        document.body.classList.add('green-theme');
    } else if (theme === 'purple') {
        document.body.classList.add('purple-theme');
    }
}

function exportData() {
    const dataStr = JSON.stringify(classData, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
    
    const exportFileDefaultName = `kelas-8E-backup-${new Date().toISOString().split('T')[0]}.json`;
    
    const linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
    
    showToast('Data berhasil diekspor!', 'success');
}

function importData(event) {
    const file = event.target.files[0];
    
    if (!file) return;
    
    const reader = new FileReader();
    
    reader.onload = function(e) {
        try {
            const importedData = JSON.parse(e.target.result);
            classData = importedData;
            saveData();
            
            // Reload all data
            loadTodaySchedule();
            loadTodayDuty();
            loadMembers('all');
            loadNotes();
            
            showToast('Data berhasil diimpor!', 'success');
        } catch (error) {
            showToast('File tidak valid!', 'error');
        }
    };
    
    reader.readAsText(file);
    
    // Reset file input
    event.target.value = '';
}

function resetData() {
    localStorage.removeItem('kelas8EData');
    localStorage.removeItem('kelas8ETheme');
    
    // Reload page
    location.reload();
}

// ===== UTILITY FUNCTIONS =====
function startClock() {
    function updateClock() {
        const now = new Date();
        
        // Format time
        const time = now.toLocaleTimeString('id-ID', { 
            hour: '2-digit', 
            minute: '2-digit' 
        });
        
        // Format day
        const days = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
        const day = days[now.getDay()];
        
        // Update elements
        const timeElement = document.getElementById('currentTime');
        const dayElement = document.getElementById('currentDay');
        
        if (timeElement) timeElement.textContent = time;
        if (dayElement) dayElement.textContent = day;
    }
    
    // Update immediately and every second
    updateClock();
    setInterval(updateClock, 1000);
}

function showToast(message, type = 'success') {
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toastMessage');
    
    // Set message and type
    toastMessage.textContent = message;
    
    // Set icon based on type
    const icon = toast.querySelector('i');
    if (type === 'success') {
        icon.className = 'fas fa-check-circle';
        toast.style.background = '#27ae60';
    } else if (type === 'error') {
        icon.className = 'fas fa-exclamation-circle';
        toast.style.background = '#e74c3c';
    } else if (type === 'info') {
        icon.className = 'fas fa-info-circle';
        toast.style.background = '#3498db';
    }
    
    // Show toast
    toast.style.display = 'flex';
    
    // Auto hide after 3 seconds
    setTimeout(() => {
        toast.style.display = 'none';
    }, 3000);
}

function showConfirmationModal(title, message, confirmCallback) {
    const modal = document.getElementById('confirmationModal');
    const modalMessage = document.getElementById('modalMessage');
    
    // Set modal content
    modalMessage.textContent = message;
    
    // Show modal
    modal.style.display = 'flex';
    
    // Close modal events
    const closeModal = () => {
        modal.style.display = 'none';
        // Remove event listeners
        document.getElementById('modalCancel').removeEventListener('click', closeModal);
        document.getElementById('modalConfirm').removeEventListener('click', confirmAction);
        modal.querySelector('.modal-close').removeEventListener('click', closeModal);
    };
    
    const confirmAction = () => {
        if (confirmCallback) confirmCallback();
        closeModal();
    };
    
    // Add event listeners
    document.getElementById('modalCancel').addEventListener('click', closeModal);
    document.getElementById('modalConfirm').addEventListener('click', confirmAction);
    modal.querySelector('.modal-close').addEventListener('click', closeModal);
}